<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HDR Image Analyzer</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link rel="stylesheet" href="src/css/styles.css">
</head>
<body>
    <div class="container">
        <div class="left-panel">
            <!-- Compact Horizontal Input Bar -->
            <div class="input-bar">
                <!-- Logo/Branding -->
                <div class="logo-section">
                    <div class="logo">
                        <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Gradient definitions -->
                            <defs>
                                <linearGradient id="hdrgradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#00bcd4;stop-opacity:1" />
                                    <stop offset="50%" style="stop-color:#ff9800;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#9c27b0;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <!-- HDR curve icon -->
                            <path d="M4 20 Q 8 18, 12 12 T 20 4" stroke="url(#hdrgradient)" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                            <path d="M4 24 Q 10 22, 14 16 T 24 8" stroke="#4a9eff" stroke-width="1.5" fill="none" opacity="0.5" stroke-linecap="round"/>
                            <!-- Dots representing data points -->
                            <circle cx="6" cy="19" r="1.5" fill="#00bcd4"/>
                            <circle cx="12" cy="14" r="1.5" fill="#ff9800"/>
                            <circle cx="18" cy="8" r="1.5" fill="#9c27b0"/>
                        </svg>
                    </div>
                    <div class="logo-text">
                        <div style="font-weight: 600; font-size: 13px; color: #e0e0e0;">HDR Analyzer</div>
                        <div style="font-size: 9px; color: #666; letter-spacing: 0.5px;">TRANSFER FUNCTIONS</div>
                    </div>
                </div>
                
                <div class="divider-vertical"></div>
                
                <!-- Samples Dropdown -->
                <div class="input-group">
                    <div class="input-label">Samples</div>
                    <div class="samples-dropdown">
                        <button class="samples-trigger" id="samplesTrigger">
                            <span>‚ñº</span> Choose
                        </button>
                        <div class="samples-menu" id="samplesMenu">
                            <div style="padding: 4px 8px; font-size: 10px; color: #777; border-bottom: 1px solid #333;">Test Patterns</div>
                            <div class="sample-item" data-sample="red">üî¥ Pure Red</div>
                            <div class="sample-item" data-sample="green">üü¢ Pure Green</div>
                            <div class="sample-item" data-sample="blue">üîµ Pure Blue</div>
                            <div class="sample-item" data-sample="white">‚ö™ Pure White</div>
                            <div class="sample-item" data-sample="black">‚ö´ Pure Black</div>
                            <div class="sample-item" data-sample="gradient">üåà Linear Gradient</div>
                            <div class="sample-item" data-sample="radialGradient">üéØ Radial Gradient</div>
                            <div class="sample-item" data-sample="colorBars">üìä SMPTE Color Bars</div>
                            <div class="sample-item" data-sample="graySteps">üì∂ Gray Steps</div>
                            <div style="padding: 4px 8px; font-size: 10px; color: #777; border-bottom: 1px solid #333; margin-top: 4px;">Generated Scenes</div>
                            <div class="sample-item" data-sample="landscape">üèûÔ∏è Landscape</div>
                            <div class="sample-item" data-sample="sunset">üåÖ Sunset</div>
                            <div class="sample-item" data-sample="neon">üí´ Neon Lights</div>
                            <div class="sample-item" data-sample="city">üåÉ City Night</div>
                            <div class="sample-item" data-sample="fire">üî• Fire Effect</div>
                            <div class="sample-item" data-sample="ocean">üåä Ocean Waves</div>
                        </div>
                    </div>
                </div>
                
                <!-- Upload Area -->
                <div class="input-group">
                    <div class="input-label">Upload</div>
                    <div class="upload-area" id="uploadArea">
                        <span>üìÅ Drop or browse</span>
                        <input type="file" id="fileInput" accept="image/*" style="display: none;">
                    </div>
                </div>
                
                <!-- URL Input -->
                <div class="input-group" style="flex: 1; position: relative;">
                    <div class="input-label">URL</div>
                    <div class="url-input-group">
                        <input type="url" id="urlInput" placeholder="Paste image URL...">
                        <button id="loadUrlBtn">Load</button>
                    </div>
                    <div id="urlError"></div>
                </div>
            </div>
            
            <!-- Image Info -->
            <div class="info" id="imageInfo">
                No image loaded
            </div>
            
            <!-- Image Display Area -->
            <div class="image-container">
                <img id="uploadedImage" style="display: none;">
            </div>
        </div>
        
        <div class="right-panel">
            <div class="controls">
                <label>
                    <input type="checkbox" id="showCurves" checked>
                    Show Transfer Curves
                </label>
                <label>
                    <input type="checkbox" id="showHistogram" checked>
                    Show Histogram
                </label>
                <div class="controls-right">
                    <span class="control-label">View</span>
                    <div class="toggle-group">
                        <button id="separateView">Separate</button>
                        <button id="combinedView" class="active">Combined</button>
                    </div>
                </div>
            </div>
            <div class="controls" style="border-top: 1px solid #333; margin-top: 8px; padding-top: 8px;">
                <div style="display: flex; align-items: center; gap: 15px;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span class="control-label">Mode</span>
                        <div class="toggle-group">
                            <button id="oetfMode" class="active">OETF</button>
                            <button id="eotfMode">EOTF</button>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;" id="peakBrightnessControl">
                        <span class="control-label">Peak</span>
                        <select id="peakBrightness" style="background: #1a1a1a; color: #e0e0e0; border: 1px solid #333; padding: 4px 8px; border-radius: 4px;">
                            <option value="100">100 nits (SDR)</option>
                            <option value="200">200 nits</option>
                            <option value="400">400 nits</option>
                            <option value="600">600 nits</option>
                            <option value="1000" selected>1000 nits</option>
                            <option value="2000">2000 nits</option>
                            <option value="4000">4000 nits</option>
                            <option value="10000">10000 nits</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="graphs-container combined-view" id="graphsContainer">
                <div class="graph" id="srgbGraph"></div>
                <div class="graph" id="pqGraph"></div>
                <div class="graph" id="hlgGraph"></div>
                <div class="combined-graph active" id="combinedGraph"></div>
            </div>
        </div>
    </div>
    
    <canvas id="canvas"></canvas>
    <div class="hover-indicator" id="hoverIndicator"></div>
    <script src="src/js/histogram-enhancement.js"></script>
    <script src="src/js/sample-generators.js"></script>
    <script src="src/js/script.js"></script>
    <script src="src/js/url-loader.js"></script>
</body>
</html>